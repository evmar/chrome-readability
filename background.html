<script>
var kActionId = "readability";

chrome.tabs.onCreated.addListener(function(tab) {
  chrome.pageActions.enableForTab(kActionId,
                                  { tabId: tab.id, url: tab.url });
});

chrome.tabs.onUpdated.addListener(function(tabid, info) {
  if (info.url) {
    chrome.pageActions.enableForTab(kActionId,
                                    { tabId: tabid, url: info.url });
  }
});

chrome.pageActions["readability"].addListener(function(actionid, info) {
  chrome.tabs.connect(info.tabId).postMessage("go");
});

</script>
